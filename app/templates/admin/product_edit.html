{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: {{ product.name }}</h2>

  <form method="post" enctype="multipart/form-data">
    <div class="mb-3">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
      <input type="text" name="name" value="{{ product.name }}" class="form-control">
    </div>
    <div class="mb-3">
      <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
      <select name="category_id" class="form-select">
        <option value="">---</option>
        {% for c in categories %}
        <option value="{{ c.id }}" {% if product.category_id==c.id %}selected{% endif %}>{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
      <input type="file" name="image" class="form-control">
      {% if product.image %}
        <img src="{{ product.image }}" class="img-fluid mt-2" style="max-height:80px;">
      {% endif %}
    </div>
    <button class="btn btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </form>

  <hr>
  <h3>–í–∞—Ä–∏–∞–Ω—Ç—ã</h3>
  <table class="table">
    <thead><tr><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–í –∫–æ—Ä–æ–±–∫–µ</th><th>–û—Å—Ç–∞—Ç–æ–∫</th><th>–¶–µ–Ω–∞</th><th></th></tr></thead>
    <tbody>
      {% for v in product.variants %}
      <tr>
        <td>{{ v.name }}</td>
        <td>{{ v.pack_size }}</td>
        <td>{{ v.stock }}</td>
        <td>{{ v.unit_price }}</td>
        <td>
          <form method="post" action="/admin/catalog/variants/{{ v.id }}/delete" class="d-inline">
            <button class="btn btn-sm btn-outline-danger">üóë</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <h4>‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç</h4>
  <form method="post" action="/admin/catalog/products/{{ product.id }}/variants/new">
    <div class="mb-3">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞</label>
      <input type="text" name="name" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>–®—Ç—É–∫ –≤ –∫–æ—Ä–æ–±–∫–µ</label>
      <input type="number" name="pack_size" class="form-control" required>
    </div>
    <div class="row">
      <div class="col"><label>–ö–æ—Ä–æ–±–æ–∫</label><input type="number" name="boxes" class="form-control" value="0"></div>
      <div class="col"><label>–®—Ç—É–∫</label><input type="number" name="units" class="form-control" value="0"></div>
    </div>
    <div class="mb-3">
      <label>–¶–µ–Ω–∞</label>
      <input type="number" step="0.01" name="unit_price" class="form-control" required>
    </div>
    <button class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
  </form>
</div>
{% endblock %}

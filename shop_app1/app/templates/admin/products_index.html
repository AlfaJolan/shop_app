{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <div class="d-flex align-items-center justify-content-between mb-4">
    <h2 class="mb-0">üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º</h2>
    <a href="/admin/catalog/products/new" class="btn btn-success btn-lg">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle shadow-sm">
      <thead class="table-light">
        <tr>
          <th style="width:120px">–§–æ—Ç–æ</th>
          <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
          <th>SKU</th>
          <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
          <th>–í–∞—Ä–∏–∞–Ω—Ç—ã</th>
          <th style="width:150px" class="text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody>
        {% for p in products %}
        <tr>
          <td>
            {% if p.image %}
              <img src="/static/uploads/products/{{ p.image }}" alt="{{ p.name }}"
                   style="height:70px; object-fit:cover; border-radius:8px;">
            {% else %}
              <span class="text-muted">–Ω–µ—Ç —Ñ–æ—Ç–æ</span>
            {% endif %}
          </td>
          <td class="fw-semibold">{{ p.name }}</td>
          <td>{{ p.sku or "-" }}</td>
          <td>{{ p.category.name if p.category else "-" }}</td>
          <td>
            {% if p.variants %}
              <ul class="list-unstyled mb-0">
                {% for v in p.variants %}
                  <li>
                    {{ v.name }} ‚Äî <b>{{ "%.2f"|format(v.unit_price) }} ‚Ç∏</b>
                    <span class="text-muted">(–æ—Å—Ç–∞—Ç–æ–∫: {{ v.stock }} {{ p.unit }})</span>
                  </li>
                {% endfor %}
              </ul>
            {% else %}
              <span class="text-muted">–Ω–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</span>
            {% endif %}
          </td>
          <td class="text-end">
            <a href="/admin/catalog/products/{{ p.id }}/edit" class="btn btn-sm btn-primary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
